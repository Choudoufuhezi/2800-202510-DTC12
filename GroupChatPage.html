<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Group Chat</title>

    <!-- Tailwind via CDN -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <!-- Font Awesome for icons -->
    <script src="https://kit.fontawesome.com/dd6ea4ec65.js" crossorigin="anonymous"></script>

    <!-- Group Chat Page JS -->
    <script defer src="scripts/groupChatPage.js"></script>
</head>

<body class="bg-[#f5f3eb98]">

    <!--Top Nav-->
    <nav id="topNav" class="sticky top-0"></nav>

    <div id="familyIconContainer"></div>

    <!--Main Content-->
    <div class="h-[calc(100vh-140px)] w-full flex items-center justify-center">
        <div class="w-full max-w-full h-full flex flex-col">

            <!-- Info icon at top-right -->
            <div class="flex justify-end px-4 pt-4">
                <button id="info-btn" class="text-blue-600 hover:text-blue-800 text-2xl">
                    <i class="fas fa-info-circle"></i>
                </button>
            </div>


            <!-- Chat Box -->
            <div id="chat-box" class="flex-1 min-h-0 overflow-y-auto p-4 space-y-3 bg-gray-50">
                <!-- Messages will go here -->
            </div>

            <!-- Reply Preview -->
            <div id="reply-preview"
                class="hidden px-4 py-2 border-t border-b border-gray-200 bg-gray-50 text-sm text-gray-700 relative">
                <div id="reply-text" class="truncate pr-6"></div>
                <button id="cancel-reply" class="absolute right-2 top-2 text-gray-400 hover:text-gray-700">âœ•</button>
            </div>

            <!-- Message Input -->
            <div class="flex p-3 border-t border-gray-200 bg-white">
                <input id="message-input" type="text" placeholder="Type a message"
                    class="flex-1 p-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring focus:border-blue-300" />
                <button id="send-btn"
                    class="bg-blue-500 text-white px-4 py-2 rounded-r-lg hover:bg-blue-600">Send</button>
            </div>

            <!-- Group Info Modal -->
            <div id="group-info"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div
                    class="bg-white w-full max-w-sm sm:max-w-md md:max-w-lg p-6 rounded-lg shadow-lg relative overflow-y-auto max-h-[90vh]">

                    <!-- Close and Settings Button -->
                    <div class="absolute top-2 right-2 flex items-center gap-4">
                        <button id="settings-btn" class="text-gray-600 hover:text-gray-800 text-xl">
                            <i class="fas fa-cog"></i> <!-- Settings Icon -->
                        </button>
                        <button id="close-group-info" class="text-gray-500 top-4 hover:text-black text-xl">
                            &times; <!-- Close Icon -->
                        </button>
                    </div>

                    <!-- Modal Content -->
                    <h3 class="text-xl font-semibold mb-3">Info</h3>
                    <p><strong>Group Name:</strong> <span id="info-group-name"></span></p>
                    <p class="mt-2"><strong>Invite Link:</strong>
                        <a href="#" id="invite-link" class="text-blue-500 underline break-words"></a>
                    </p>
                    <div class="mt-4">
                        <p class="font-semibold mb-1">Members:</p>
                        <ul id="member-list" class="space-y-1 text-sm text-gray-700 list-disc list-inside"></ul>
                    </div>
                </div>
            </div>


            <!-- Settings Modal -->
            <div id="settings-modal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="bg-white w-full max-w-sm sm:max-w-md md:max-w-lg p-6 rounded-lg shadow-lg relative">

                    <!-- Close Button -->
                    <button id="close-settings"
                        class="absolute top-2 right-2 text-gray-500 hover:text-black text-xl">&times;</button>

                    <!-- Settings Content -->
                    <h3 class="text-xl font-semibold mb-3">Settings</h3>

                    <div class="space-y-4">
                        <!-- Notification Setting -->
                        <div class="flex items-center justify-between mb-4">
                            <span class="font-semibold">Notifications</span>
                            <button id="notification-toggle" class="text-gray-500 hover:text-gray-700 text-2xl">
                                <i class="fas fa-bell"></i>
                            </button>
                        </div>

                        <div class="flex justify-between items-center">
                            <span class="font-semibold">Dark Mode</span>
                            <input type="checkbox" class="text-blue-500" id="dark-mode-toggle">
                        </div>

                        <div class="flex justify-between items-center">
                            <span class="font-semibold">Custom Sounds</span>
                            <input type="checkbox" class="text-blue-500" id="custom-sounds-toggle">
                        </div>
                    </div>
                </div>
            </div>



            <!-- Member Detail Modal -->
            <div id="member-detail-modal"
                class="fixed inset-0 bg-black bg-opacity-50 hidden z-50 flex items-center justify-center p-4">
                <div class="bg-white w-full max-w-sm p-5 rounded-lg shadow-lg relative">
                    <button id="close-member-detail"
                        class="absolute top-2 right-2 text-gray-500 hover:text-black text-xl">&times;</button>
                    <h3 class="text-xl font-semibold mb-2">Member Info</h3>
                    <p><strong>Name:</strong> <span id="member-name"></span></p>
                    <button id="dm-button"
                        class="mt-4 bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Direct
                        Message</button>
                </div>
            </div>

        </div>
    </div>

    <!--Bottom Nav-->
    <nav id="bottomNav" class="sticky bottom-0"></nav>

    <!--Footer-->
    <nav id="footer"></nav>

    <!--JavaScript-->
    <script src="../scripts/add_nav.js"></script>
    <script src="../scripts/load_family_icon.js"></script>
</body>

</html>